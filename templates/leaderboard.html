{% extends "base.html" %}
{% block content %}
<h1>Leaderboard</h1>

<div class="grid grid-3">
  <div class="card">
    <h2>Top results</h2>
    <table>
      <thead>
        <tr><th>User</th><th>WPM</th><th>Accuracy</th><th>Date</th></tr>
      </thead>
      <tbody>
        {% for r in top %}
          <tr>
            <td class="mono">{{ r.name if r.name else r.email }}</td>
            <td>{{ "%.1f"|format(r.wpm) }}</td>
            <td>{{ (r.accuracy * 100)|round(1) }}%</td>
            <td class="small">{{ r.created_at[:10] }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="card">
    <h2>ELO rankings</h2>
    <table>
      <thead>
        <tr><th>User</th><th>ELO</th></tr>
      </thead>
      <tbody>
        {% for r in elo %}
          <tr>
            <td class="mono">{{ r.name if r.name else r.email }}</td>
            <td>{{ r.rating }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="card">
    <h2>My history</h2>
    <table>
      <thead>
        <tr><th>WPM</th><th>Accuracy</th><th>Duration</th><th>Date</th></tr>
      </thead>
      <tbody>
        {% for r in mine %}
          <tr>
            <td>{{ "%.1f"|format(r.wpm) }}</td>
            <td>{{ (r.accuracy * 100)|round(1) }}%</td>
            <td>{{ r.duration_seconds }}s</td>
            <td class="small">{{ r.created_at[:10] }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
